paths:
  /api/v1/projects/{id}:
    patch:
      summary: Update an existing project
      description: |
        Updates an existing project.  
        All fields are optional.  
        Requires either a global permission `UPDATE_PROJECTS` or a project-specific permission `UPDATE_PROJECT`.  
        If `publicProject` is sent in the body as `true`, the request requires either the global permission `CREATE_PUBLIC_PROJECTS` or the project-specific permission `SET_PUBLIC_PROJECT`.  
        If `publicProject` is sent as `false`, the request requires either the global permission `CREATE_PRIVATE_PROJECTS` or the project-specific permission `SET_PRIVATE_PROJECT`.  
        All fields are validated according to their type if provided.
      tags:
        - Projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: The ID of the project to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Project Phoenix Updated
                  description: Optional. Must be a non-empty string if provided.
                short_description:
                  type: string
                  example: Updated short description of the project
                  description: Optional. Must be a non-empty string if provided.
                long_description:
                  type: string
                  example: Updated long description of the project
                  description: Optional. Must be a non-empty string if provided.
                logo:
                  type: string
                  example: Updated logo description of the project
                  description: Optional. Must be a non-empty string if provided.
                status:
                  type: string
                  example: FINISHED
                  description: Optional. Must be one of the allowed project status values.
                publicProject:
                  type: boolean
                  example: true
                  description: Optional. Requires specific permissions depending on its value.
                startDate:
                  type: string
                  format: date
                  example: 2024-03-28
                  description: Optional. Must be a valid ISO 8601 date string if provided.
                endDate:
                  type: string
                  format: date
                  example: 2024-04-27
                  description: Optional. Must be a valid ISO 8601 date string if provided.
                estimatedEndDate:
                  type: string
                  format: date
                  example: 2024-04-23
                  description: Optional. Must be a valid ISO 8601 date string if provided.
      responses:
        "200":
          description: Project successfully updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: The project has been successfully updated.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: Project Phoenix Updated
                        short_description:
                          type: string
                          example: Updated short description
                        long_description:
                          type: string
                          example: Updated long description
                        logo:
                          type: string
                          example: Updated logo
                        status:
                          type: string
                          example: IN_PROGRESS
                        public:
                          type: boolean
                          example: true
                        start_date:
                          type: string
                          example: 2024-03-28T03:00:00.000Z
                        end_date:
                          type: string
                          example: 2024-04-27T03:00:00.000Z
                        estimated_end:
                          type: string
                          example: 2024-04-23T03:00:00.000Z
                        key:
                          type: string
                          example: "****"
                        created_at:
                          type: string
                          example: 2025-08-26T00:11:49.326Z
                        updated_at:
                          type: string
                          example: 2025-08-26T12:45:10.000Z
                  pagination:
                    type: object
                    properties:
                      offset:
                        type: integer
                        example: 0
                      limit:
                        type: integer
                        example: 0
                      count:
                        type: integer
                        example: 0
                      total:
                        type: integer
                        example: 0
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationError"
        "401":
          description: Missing or invalid token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden, insufficient permissions
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenPermissionError"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: Project not found.
                  data:
                    type: array
                    example: []
                  pagination:
                    type: object
                    properties:
                      offset:
                        type: integer
                        example: 0
                      limit:
                        type: integer
                        example: 0
                      count:
                        type: integer
                        example: 0
                      total:
                        type: integer
                        example: 0
